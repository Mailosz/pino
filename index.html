<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
    <style>
      body {
        margin: 0;
        height: 100vh;
      }

      #main-canvas {
        width: 100%;
        height: 100%
      }
    </style>
  </head>
  <body>
    <canvas id="main-canvas"></canvas>
    <script type="module">
      import init, { initialize, resize, redraw } from "./pkg/pino.js";
      import {CanvasManager, DrawingManager} from "./js/www/js/canvas/main.js";


      class WebGlDrawingManager extends DrawingManager {


        constructor() {
          super();
        }

        resize(width, height) {
            resize(this.cm.canvasElement.id, width, height);
            redraw(this.cm.canvasElement.id);
        }

        /**
         * Called automatically before first draw
         */
        prepare() {
          
          initialize(this.cm.canvasElement.id);
        }

        zoomBy(factor, origin) {
            throw "zoomBy not implemented";
        }


        redraw() {
          console.log("yyyyy" + this.cm.canvasElement.id)
          redraw(this.cm.canvasElement.id);
        }
      }

      init().then(() => {
        let canvas = document.getElementById('main-canvas');
        console.log(canvas.id);
        let cm = new CanvasManager(canvas);
        cm.setDrawingManager(new WebGlDrawingManager());
        cm.redraw();
        // initialize('main-canvas');
        // resize("main-canvas",200,200);
        // redraw("main-canvas")
      });
    </script>
  </body>
</html>